<div class="dialog-overlay" *ngIf="isOpen()" (click)="close()">
  <div class="dialog-content" (click)="$event.stopPropagation()">
    <!-- Reward Message -->
    <div class="reward-message" *ngIf="showRewardMessage()">
      <div class="reward-icon">ğŸ‰</div>
      <div class="reward-text">{{ rewardMessage() }}</div>
      <button class="btn btn-primary" (click)="closeRewardMessage()">
        Sá»­ dá»¥ng Voucher
      </button>
    </div>

    <!-- Check-in Form -->
    <div *ngIf="!showRewardMessage()">
      <h2 class="dialog-title">Check-in</h2>

      <!-- For returning customers -->
      <div *ngIf="customerService.currentCustomer() && !isNewCustomer()">
        <div class="greeting">
          ğŸŠ ChÃ o má»«ng {{ customerService.currentCustomer()!.name }} trá»Ÿ láº¡i!
        </div>
        <button class="btn btn-primary btn-large" (click)="onCheckIn()">
          Nháº¥n Ä‘á»ƒ Check-in
        </button>
        <button class="btn btn-secondary" (click)="close()">
          ÄÃ³ng
        </button>
      </div>

      <!-- For new customers -->
      <div *ngIf="isNewCustomer()" class="form-group">
        <label for="name">Vui lÃ²ng cho chÃºng tÃ´i biáº¿t tÃªn báº¡n:</label>
        <input
          id="name"
          type="text"
          [(ngModel)]="customerName"
          placeholder="Nháº­p tÃªn cá»§a báº¡n"
          class="input-field"
        />

        <label for="phone">Vui lÃ²ng cho chÃºng tÃ´i biáº¿t SÄT: (vÃ­ dá»¥ nháº­p: xxx3070044)</label>
        <input
          id="phone"
          type="tel"
          [(ngModel)]="customerPhone"
          placeholder="Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i cá»§a báº¡n"
          maxlength="11"
          class="input-field"
        />

        <!-- New customer actions -->
        <button *ngIf="isNewCustomer()" class="btn btn-primary btn-large" (click)="onRegis()">
          ÄÄƒng kÃ½
        </button>

        <!-- Old customer actions -->
        <button *ngIf="!isNewCustomer()" class="btn btn-primary btn-large" (click)="onCheckIn()">
          Check-in
        </button>

        <button class="btn btn-secondary" (click)="close()">
          ÄÃ³ng
        </button>
      </div>
    </div>
  </div>
</div>
